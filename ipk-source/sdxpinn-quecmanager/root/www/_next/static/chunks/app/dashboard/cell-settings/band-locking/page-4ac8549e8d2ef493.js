(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1942],{42554:(e,t,s)=>{Promise.resolve().then(s.bind(s,75808))},75808:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var a=s(20475),r=s(20107),o=s(72167),n=s(574),i=s(42541),l=s(32857),c=s(29475),d=s(91994),u=s(88926);let f={lte:"lte_band",nsa:"nsa_nr5g_band",sa:"nrdc_nr5g_band"},p={lte:"lte_band",nsa:"nsa_nr5g_band",sa:"nr5g_band"},m=()=>{let{toast:e}=(0,l.dj)(),[t,s]=(0,r.useState)({lte:[],nsa:[],sa:[]}),[m,h]=(0,r.useState)({lte:[],nsa:[],sa:[]}),[v,g]=(0,r.useState)(!0),[b,w]=(0,r.useState)(null),[x,N]=(0,r.useState)({lte:!1,nsa:!1,sa:!1}),y=(e,t,s)=>{let a=e.split("\n"),r=s?f[t]:p[t];for(let e of a){let t='"'.concat(r,'"');if(e.includes(t)){let t=e.match(/\"[^\"]+\",(.+)/);if(t&&t[1])return t[1].trim().split(":").map(Number).filter(e=>!isNaN(e))}}return[]};(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/cgi-bin/quecmanager/profiles/check_status.sh");if(!e.ok)throw Error("Failed to fetch profile status: ".concat(e.statusText));let t=await e.json();if(console.log("Profile Status:",t),"success"===t.status&&t.profile&&"unknown"!==t.profile&&"none"!==t.profile){let e=await fetch("/cgi-bin/quecmanager/profiles/list_profiles.sh");if(e.ok){let s=await e.json();if("success"===s.status&&Array.isArray(s.profiles)){let e=s.profiles.find(e=>e.name===t.profile);if(e){w(e);let t={lte:!!e.lte_bands,nsa:!!e.nsa_nr5g_bands,sa:!!e.sa_nr5g_bands};N(t),console.log("Active Profile:",e),console.log("Controlled Bands:",t)}}}}else w(null),N({lte:!1,nsa:!1,sa:!1})}catch(e){console.error("Error fetching profile data:",e)}})()},[]);let _=async()=>{try{let e=await fetch("/cgi-bin/quecmanager/at_cmd/fetch_data.sh?set=7");if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let t=await e.json(),a=t[0].response,r={lte:y(a,"lte",!0),nsa:y(a,"nsa",!0),sa:y(a,"sa",!0)};s(r);let o=t[1].response,n={lte:y(o,"lte",!1),nsa:y(o,"nsa",!1),sa:y(o,"sa",!1)};h(n),g(!1)}catch(t){console.error("Error fetching bands:",t),e({title:"Error",description:"Failed to fetch bands data.",variant:"destructive"}),g(!1)}};(0,r.useEffect)(()=>{_()},[]),(0,r.useEffect)(()=>{if(b){let e={...m},t=!1;if(x.lte&&b.lte_bands){let s=b.lte_bands.split(",").map(Number).filter(e=>!isNaN(e));e.lte=s,t=!0}if(x.nsa&&b.nsa_nr5g_bands){let s=b.nsa_nr5g_bands.split(",").map(Number).filter(e=>!isNaN(e));e.nsa=s,t=!0}if(x.sa&&b.sa_nr5g_bands){let s=b.sa_nr5g_bands.split(",").map(Number).filter(e=>!isNaN(e));e.sa=s,t=!0}t&&h(e)}},[b,x]);let j=(e,t)=>{x[e]||h(s=>({...s,[e]:s[e].includes(t)?s[e].filter(e=>e!==t):[...s[e],t].sort((e,t)=>e-t)}))},E=async s=>{if(x[s]){e({title:"Profile Controlled",description:"".concat(s.toUpperCase(),' bands are currently managed by profile "').concat(null==b?void 0:b.name,'"'),variant:"destructive"});return}try{var a,r,o,n,i,l,c,d;let f=m[s].join(":");if("nsa"===s){let e=m.sa.join(":"),s=await (0,u.a)('AT+QNWPREFCFG="'.concat(p.nsa,'",').concat(f),!0);if((null===(a=s.response)||void 0===a?void 0:a.status)!=="success")throw Error((null===(r=s.response)||void 0===r?void 0:r.raw_output)||"Failed to lock NSA bands");if(e){let t=await (0,u.a)('AT+QNWPREFCFG="'.concat(p.sa,'",').concat(e),!0);if((null===(o=t.response)||void 0===o?void 0:o.status)!=="success")throw Error((null===(n=t.response)||void 0===n?void 0:n.raw_output)||"Failed to restore SA bands")}else{let e=t.sa.join(":"),s=await (0,u.a)('AT+QNWPREFCFG="'.concat(p.sa,'",').concat(e),!0);if((null===(i=s.response)||void 0===i?void 0:i.status)!=="success")throw Error((null===(l=s.response)||void 0===l?void 0:l.raw_output)||"Failed to set default SA bands")}h(s=>({...s,nsa:m.nsa,sa:e?m.sa:t.sa}))}else{let e=await (0,u.a)('AT+QNWPREFCFG="'.concat(p[s],'",').concat(f),!0);if((null===(c=e.response)||void 0===c?void 0:c.status)!=="success")throw Error((null===(d=e.response)||void 0===d?void 0:d.raw_output)||"Failed to lock ".concat(s.toUpperCase()," bands"));h(e=>({...e,[s]:m[s]}))}e({title:"Band Locking",description:"Bands locked successfully."}),setTimeout(_,1e3)}catch(a){let t=a instanceof Error?a.message:"Unknown error";console.error("Error locking ".concat(s," bands:"),a),e({title:"Error",description:"Failed to lock ".concat(s.toUpperCase()," bands: ").concat(t),variant:"destructive"})}},T=e=>{x[e]||h(t=>({...t,[e]:[]}))},A=async s=>{if(x[s]){e({title:"Profile Controlled",description:"".concat(s.toUpperCase(),' bands are currently managed by profile "').concat(null==b?void 0:b.name,'"'),variant:"destructive"});return}try{var a,r,o,n,i,l;let c=t[s].join(":");if("nsa"===s){let e=await (0,u.a)('AT+QNWPREFCFG="'.concat(p.nsa,'",').concat(c),!0);if((null===(a=e.response)||void 0===a?void 0:a.status)!=="success")throw Error((null===(r=e.response)||void 0===r?void 0:r.raw_output)||"Failed to reset NSA bands");let t=m.sa.join(":");if(t){let e=await (0,u.a)('AT+QNWPREFCFG="'.concat(p.sa,'",').concat(t),!0);if((null===(o=e.response)||void 0===o?void 0:o.status)!=="success")throw Error((null===(n=e.response)||void 0===n?void 0:n.raw_output)||"Failed to preserve SA bands")}}else{let e=await (0,u.a)('AT+QNWPREFCFG="'.concat(p[s],'",').concat(c),!0);if((null===(i=e.response)||void 0===i?void 0:i.status)!=="success")throw Error((null===(l=e.response)||void 0===l?void 0:l.raw_output)||"Failed to reset ".concat(s.toUpperCase()," bands"))}e({title:"Reset Successful",description:"".concat(s.toUpperCase()," bands reset to default.")}),await _()}catch(a){let t=a instanceof Error?a.message:"Unknown error";console.error("Error resetting ".concat(s," bands:"),a),e({title:"Error",description:"Failed to reset ".concat(s.toUpperCase()," bands: ").concat(t),variant:"destructive"})}},S=e=>{let{title:s,description:r,bandType:l,prefix:u,isProfileControlled:f,profileName:p}=e;return(0,a.jsxs)(o.Zp,{children:[(0,a.jsx)(o.aR,{children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(o.ZB,{children:s}),(0,a.jsx)(o.BT,{children:r})]}),f&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs font-medium px-2 py-1 rounded-md bg-slate-100 dark:bg-slate-800",children:[(0,a.jsx)(c.A,{className:"h-3 w-3",color:"orange"}),(0,a.jsxs)("span",{children:["Profile Controlled by ",p]})]})]})}),(0,a.jsx)(o.Wu,{className:"grid lg:grid-cols-8 md:grid-cols-6 sm:grid-cols-4 grid-cols-3 grid-flow-row gap-4",children:v?(0,a.jsx)("div",{className:"col-span-8",children:"Fetching bands..."}):t[l].map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(n.S,{id:"".concat(l,"-").concat(e),checked:m[l].includes(e),onCheckedChange:()=>j(l,e),disabled:f,className:f?"cursor-not-allowed opacity-60":""}),(0,a.jsxs)("label",{htmlFor:"".concat(l,"-").concat(e),className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ".concat(f?"cursor-not-allowed opacity-60":""),children:[u,e]})]},e))}),(0,a.jsxs)(o.wL,{className:"border-t py-4 grid grid-flow-row md:grid-cols-3 grid-cols-1 gap-3",children:[(0,a.jsxs)(i.$,{onClick:()=>E(l),disabled:f,children:[(0,a.jsx)(c.A,{className:"h-4 w-4"}),"Lock Selected Bands"]}),(0,a.jsx)(i.$,{variant:"secondary",onClick:()=>T(l),disabled:f,children:"Uncheck All"}),(0,a.jsxs)(i.$,{variant:"secondary",onClick:()=>A(l),disabled:f,children:[(0,a.jsx)(d.A,{className:"h-4 w-4"}),"Reset to Default"]})]})]})};return(0,a.jsxs)("div",{className:"grid gap-6",children:[(0,a.jsx)(S,{title:"4G LTE Band Locking",description:"Lock the device to specific LTE bands.",bandType:"lte",prefix:"B",isProfileControlled:x.lte,profileName:(null==b?void 0:b.name)||""}),(0,a.jsx)(S,{title:"NR5G-NSA Band Locking",description:"Lock the device to specific NR5G-NSA bands.",bandType:"nsa",prefix:"N",isProfileControlled:x.nsa,profileName:(null==b?void 0:b.name)||""}),(0,a.jsx)(S,{title:"NR5G-SA Band Locking",description:"Lock the device to specific NR5G-SA bands.",bandType:"sa",prefix:"N",isProfileControlled:x.sa,profileName:(null==b?void 0:b.name)||""})]})}},42541:(e,t,s)=>{"use strict";s.d(t,{$:()=>c,r:()=>l});var a=s(20475),r=s(20107),o=s(61837),n=s(29395),i=s(22250);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,t)=>{let{className:s,variant:r,size:n,asChild:c=!1,...d}=e,u=c?o.DX:"button";return(0,a.jsx)(u,{className:(0,i.cn)(l({variant:r,size:n,className:s})),ref:t,...d})});c.displayName="Button"},72167:(e,t,s)=>{"use strict";s.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>l,Zp:()=>n,aR:()=>i,wL:()=>u});var a=s(20475),r=s(20107),o=s(22250);let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("rounded-xl border bg-card text-card-foreground shadow",s),...r})});n.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",s),...r})});i.displayName="CardHeader";let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:(0,o.cn)("font-semibold leading-none tracking-tight",s),...r})});l.displayName="CardTitle";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("p",{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",s),...r})});c.displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("p-6 pt-0",s),...r})});d.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",s),...r})});u.displayName="CardFooter"},574:(e,t,s)=>{"use strict";s.d(t,{S:()=>l});var a=s(20475),r=s(20107),o=s(32713),n=s(7197),i=s(22250);let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(o.bL,{ref:t,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...r,children:(0,a.jsx)(o.C1,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(n.Srz,{className:"h-4 w-4"})})})});l.displayName=o.bL.displayName},32857:(e,t,s)=>{"use strict";s.d(t,{dj:()=>f,oR:()=>u});var a=s(20107);let r=0,o=new Map,n=e=>{if(o.has(e))return;let t=setTimeout(()=>{o.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);o.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],c={toasts:[]};function d(e){c=i(c,e),l.forEach(e=>{e(c)})}function u(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function f(){let[e,t]=a.useState(c);return a.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},22250:(e,t,s)=>{"use strict";s.d(t,{cn:()=>o});var a=s(64901),r=s(868);function o(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},88926:(e,t,s)=>{"use strict";s.d(t,{a:()=>a});let a=async function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;try{var a;let r=e.trim().toUpperCase().startsWith("AT")?e.trim():"AT".concat(e.trim()),o=encodeURIComponent(r),n="/cgi-bin/quecmanager/at_cmd/at_queue_client.sh?command=".concat(o);t&&(n+="&wait=1&timeout=".concat(s));let i=await fetch(n,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(1e3*s+5e3)});if(!i.ok)throw Error("AT command failed with status: ".concat(i.status));let l=await i.json();if(l.error)throw Error("AT queue error: ".concat(l.error));if(t&&(null===(a=l.response)||void 0===a?void 0:a.status)==="timeout")throw Error("AT command timed out after ".concat(s," seconds"));return l}catch(e){throw console.error("AT Command error:",e),e}}}},e=>{var t=t=>e(e.s=t);e.O(0,[9980,7780,2494,191,6035,7358],()=>t(42554)),_N_E=e.O()}]);